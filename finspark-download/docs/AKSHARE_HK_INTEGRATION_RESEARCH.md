# AkShare æ¸¯è‚¡æ•°æ®æ¥å…¥è°ƒç ”æŠ¥å‘Š

> è°ƒç ”æ—¥æœŸï¼š2026-01-16  
> è°ƒç ”ç›®çš„ï¼šè¯„ä¼° AkShare ä½œä¸º Finspark æ¸¯è‚¡æ•°æ®æºçš„å¯è¡Œæ€§

---

## ğŸ“‹ è°ƒç ”ç»“è®ºæ€»è§ˆ

| è¯„ä¼°ç»´åº¦ | ç»“è®º | è¯¦æƒ… |
|---------|------|------|
| **API å¯†é’¥éœ€æ±‚** | âœ… æ— éœ€ API Key | å¼€æºå…è´¹ï¼Œç›´æ¥ pip å®‰è£…ä½¿ç”¨ |
| **æ¸¯è‚¡æ•°æ®è¦†ç›–** | âœ… è¦†ç›–å…¨é¢ | 53+ æ¸¯è‚¡ç›¸å…³æ¥å£ï¼Œæ¶µç›–è¡Œæƒ…ã€è´¢åŠ¡ã€å…¬å¸ä¿¡æ¯ç­‰ |
| **æ•°æ®è´¨é‡** | âš ï¸ ä¸­ç­‰åä¸Š | æ•°æ®æ¥æºä¸œæ–¹è´¢å¯Œ/æ–°æµªç­‰ï¼Œå‡†ç¡®æ€§ä¾èµ–ä¸Šæ¸¸ |
| **æ›´æ–°åŠæ—¶æ€§** | âš ï¸ æœ‰å»¶è¿Ÿ | å®æ—¶è¡Œæƒ…å»¶è¿Ÿçº¦ 15 åˆ†é’Ÿï¼Œæ—¥çº¿æ•°æ®å½“æ—¥æ”¶ç›˜åæ›´æ–° |
| **è´¢æŠ¥æ•°æ®** | âš ï¸ éƒ¨åˆ†æ”¯æŒ | æœ‰è´¢åŠ¡æŒ‡æ ‡ï¼Œä½†ä¸‰å¤§æŠ¥è¡¨æ¥å£ä¸å®Œæ•´ |
| **ç¨³å®šæ€§** | âš ï¸ ä¸­ç­‰ | æ¥å£å¯èƒ½å› ä¸Šæ¸¸å˜åŒ–è€Œå¤±æ•ˆï¼Œéœ€å®šæœŸç»´æŠ¤ |
| **æ¨èæ–¹æ¡ˆ** | âœ… å¯æ¥å…¥ | ä½œä¸º Tushare æ¸¯è‚¡æ•°æ®çš„è¡¥å……æ–¹æ¡ˆ |

---

## 1. AkShare åŸºæœ¬ä¿¡æ¯

### 1.1 é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®åç§°**ï¼šAkShareï¼ˆAè‚¡ã€æ¸¯è‚¡ã€ç¾è‚¡æ•°æ®æ¥å£åº“ï¼‰
- **å¼€æºåè®®**ï¼šMIT License
- **GitHub**ï¼šhttps://github.com/akfamily/akshare
- **æ–‡æ¡£**ï¼šhttps://akshare.akfamily.xyz/
- **PyPI**ï¼šhttps://pypi.org/project/akshare/
- **å½“å‰ç‰ˆæœ¬**ï¼š1.18.12ï¼ˆ2026-01-16 æµ‹è¯•ï¼‰

### 1.2 å®‰è£…è¦æ±‚
```bash
# ç³»ç»Ÿè¦æ±‚
- Python 3.9+ (64ä½)
- pip >= 20.0

# å®‰è£…å‘½ä»¤
pip install akshare --upgrade

# å›½å†…é•œåƒï¼ˆåŠ é€Ÿå®‰è£…ï¼‰
pip install akshare -i https://mirrors.aliyun.com/pypi/simple/
```

### 1.3 æ˜¯å¦éœ€è¦ API Keyï¼Ÿ

**âœ… ä¸éœ€è¦ API Keyï¼**

AkShare æ˜¯å¼€æºå…è´¹çš„æ•°æ®æ¥å£åº“ï¼Œä¸ Tushare Pro ä¸åŒï¼š
- **Tushare Pro**ï¼šéœ€è¦æ³¨å†Œè´¦å·è·å– Tokenï¼Œç§¯åˆ†åˆ¶é™åˆ¶
- **AkShare**ï¼šç›´æ¥å®‰è£…ä½¿ç”¨ï¼Œæ— éœ€æ³¨å†Œï¼Œæ— ç§¯åˆ†é™åˆ¶

> âš ï¸ æ³¨æ„ï¼šAkShare çš„æ•°æ®æ¥æºäºç¬¬ä¸‰æ–¹ç½‘ç«™ï¼ˆä¸œæ–¹è´¢å¯Œã€æ–°æµªã€é›ªçƒç­‰ï¼‰ï¼Œ
> å¯èƒ½å­˜åœ¨çˆ¬è™«é™åˆ¶ï¼Œé«˜é¢‘è°ƒç”¨å¯èƒ½è¢«å° IPã€‚

---

## 2. æ¸¯è‚¡æ•°æ®æ¥å£æ¸…å•

### 2.1 å·²æµ‹è¯•å¯ç”¨çš„æ¥å£ï¼ˆ2026-01-16 å®æµ‹ï¼‰

| æ¥å£åç§° | åŠŸèƒ½æè¿° | æ•°æ®æ¥æº | æµ‹è¯•ç»“æœ |
|---------|---------|---------|---------|
| `stock_hk_hist` | æ¸¯è‚¡å†å²æ—¥çº¿æ•°æ® | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_financial_indicator_em` | æ¸¯è‚¡è´¢åŠ¡æŒ‡æ ‡ | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_dividend_payout_em` | æ¸¯è‚¡åˆ†çº¢æ´¾æ¯ | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_company_profile_em` | æ¸¯è‚¡å…¬å¸æ¦‚å†µ | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_security_profile_em` | æ¸¯è‚¡è¯åˆ¸èµ„æ–™ | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_ggt_components_em` | æ¸¯è‚¡é€šæˆåˆ†è‚¡åˆ—è¡¨ | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸï¼ˆ564åªï¼‰|
| `stock_hk_growth_comparison_em` | æ¸¯è‚¡æˆé•¿æ€§å¯¹æ¯” | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |
| `stock_hk_valuation_comparison_em` | æ¸¯è‚¡ä¼°å€¼å¯¹æ¯” | ä¸œæ–¹è´¢å¯Œ | âœ… æˆåŠŸ |

### 2.2 å®Œæ•´æ¸¯è‚¡æ¥å£åˆ—è¡¨ï¼ˆ53ä¸ªï¼‰

```python
# å®æ—¶è¡Œæƒ…ç±»
stock_hk_spot_em                    # æ¸¯è‚¡å®æ—¶è¡Œæƒ…ï¼ˆå…¨éƒ¨ï¼‰
stock_hk_main_board_spot_em         # æ¸¯è‚¡ä¸»æ¿å®æ—¶è¡Œæƒ…
stock_hk_famous_spot_em             # çŸ¥åæ¸¯è‚¡å®æ—¶è¡Œæƒ…
stock_hk_ggt_spot_em                # æ¸¯è‚¡é€šå®æ—¶è¡Œæƒ…

# å†å²è¡Œæƒ…ç±»
stock_hk_hist                       # æ¸¯è‚¡æ—¥çº¿å†å²ï¼ˆæ”¯æŒå¤æƒï¼‰
stock_hk_hist_min_em                # æ¸¯è‚¡åˆ†é’Ÿçº§å†å²

# å…¬å¸ä¿¡æ¯ç±»
stock_hk_company_profile_em         # å…¬å¸æ¦‚å†µ
stock_hk_security_profile_em        # è¯åˆ¸èµ„æ–™
stock_individual_basic_info_hk_xq   # é›ªçƒä¸ªè‚¡ä¿¡æ¯

# è´¢åŠ¡æ•°æ®ç±»
stock_hk_financial_indicator_em     # è´¢åŠ¡æŒ‡æ ‡
stock_hk_growth_comparison_em       # æˆé•¿æ€§å¯¹æ¯”
stock_hk_valuation_comparison_em    # ä¼°å€¼å¯¹æ¯”
stock_hk_scale_comparison_em        # è§„æ¨¡å¯¹æ¯”

# åˆ†çº¢æ´¾æ¯ç±»
stock_hk_dividend_payout_em         # åˆ†çº¢æ´¾æ¯è®°å½•

# æ¸¯è‚¡é€šç›¸å…³
stock_hk_ggt_components_em          # æ¸¯è‚¡é€šæˆåˆ†è‚¡
stock_hsgt_hold_stock_em            # æ²ªæ·±æ¸¯é€šæŒè‚¡
stock_hsgt_individual_em            # ä¸ªè‚¡èµ„é‡‘æµå‘

# A+H è‚¡ç›¸å…³
stock_zh_ah_spot_em                 # A+Hè‚¡å®æ—¶è¡Œæƒ…
stock_zh_ah_daily                   # A+Hè‚¡å†å²è¡Œæƒ…
```

### 2.3 æ¥å£æ•°æ®å­—æ®µç¤ºä¾‹

#### æ¸¯è‚¡æ—¥çº¿æ•°æ® (`stock_hk_hist`)
```python
import akshare as ak

df = ak.stock_hk_hist(
    symbol="00700",           # è‚¡ç¥¨ä»£ç ï¼ˆä¸å¸¦ .HK åç¼€ï¼‰
    period="daily",           # daily/weekly/monthly
    start_date="20240101",
    end_date="20260116",
    adjust="qfq"              # qfqå‰å¤æƒ/hfqåå¤æƒ/ç©ºä¸å¤æƒ
)

# è¿”å›å­—æ®µï¼š
# æ—¥æœŸã€å¼€ç›˜ã€æ”¶ç›˜ã€æœ€é«˜ã€æœ€ä½ã€æˆäº¤é‡ã€æˆäº¤é¢ã€æŒ¯å¹…ã€æ¶¨è·Œå¹…ã€æ¶¨è·Œé¢ã€æ¢æ‰‹ç‡
```

#### æ¸¯è‚¡è´¢åŠ¡æŒ‡æ ‡ (`stock_hk_financial_indicator_em`)
```python
df = ak.stock_hk_financial_indicator_em(symbol="00700")

# è¿”å›å­—æ®µï¼š
# åŸºæœ¬æ¯è‚¡æ”¶ç›Šã€æ¯è‚¡å‡€èµ„äº§ã€æ³•å®šè‚¡æœ¬ã€æ¯æ‰‹è‚¡æ•°ã€æ¯è‚¡è‚¡æ¯TTMã€
# æ´¾æ¯æ¯”ç‡ã€å·²å‘è¡Œè‚¡æœ¬ã€æ€»å¸‚å€¼ã€æµé€šå¸‚å€¼ã€å¸‚ç›ˆç‡ã€å¸‚å‡€ç‡...
```

#### æ¸¯è‚¡é€šæˆåˆ†è‚¡ (`stock_hk_ggt_components_em`)
```python
df = ak.stock_hk_ggt_components_em()

# è¿”å›å­—æ®µï¼ˆ564åªè‚¡ç¥¨ï¼‰ï¼š
# åºå·ã€ä»£ç ã€åç§°ã€æœ€æ–°ä»·ã€æ¶¨è·Œé¢ã€æ¶¨è·Œå¹…ã€ä»Šå¼€ã€æœ€é«˜ã€æœ€ä½ã€
# æ˜¨æ”¶ã€æˆäº¤é‡ã€æˆäº¤é¢
```

---

## 3. æ•°æ®è´¨é‡è¯„ä¼°

### 3.1 æ•°æ®æ¥æºåˆ†æ

| æ•°æ®æ¥æº | æ¥å£ç±»å‹ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|---------|---------|------|------|
| **ä¸œæ–¹è´¢å¯Œ** | è¡Œæƒ…ã€è´¢åŠ¡ã€å…¬å¸ä¿¡æ¯ | æ•°æ®å…¨é¢ã€æ›´æ–°åŠæ—¶ | æœ‰åçˆ¬æœºåˆ¶ |
| **æ–°æµªè´¢ç»** | å®æ—¶è¡Œæƒ… | ç¨³å®šæ€§é«˜ | 15åˆ†é’Ÿå»¶è¿Ÿ |
| **é›ªçƒ** | ä¸ªè‚¡è¯¦æƒ… | æ•°æ®ä¸°å¯Œ | æ¥å£ä¸ç¨³å®š |
| **è…¾è®¯è´¢ç»** | è¡Œæƒ…æ•°æ® | é€Ÿåº¦å¿« | å­—æ®µæœ‰é™ |

### 3.2 æ•°æ®æ›´æ–°é¢‘ç‡

| æ•°æ®ç±»å‹ | æ›´æ–°é¢‘ç‡ | å»¶è¿Ÿ |
|---------|---------|------|
| å®æ—¶è¡Œæƒ… | æ¯ç§’åˆ·æ–° | çº¦ 15 åˆ†é’Ÿ |
| æ—¥çº¿æ•°æ® | æ¯æ—¥æ”¶ç›˜å | çº¦ 1-2 å°æ—¶ |
| è´¢åŠ¡æ•°æ® | è´¢æŠ¥å‘å¸ƒå | çº¦ 1-3 å¤© |
| åˆ†çº¢ä¿¡æ¯ | å…¬å‘Šå‘å¸ƒå | çº¦ 1 å¤© |

### 3.3 æ•°æ®å‡†ç¡®æ€§æµ‹è¯•

ä»¥è…¾è®¯æ§è‚¡ï¼ˆ00700.HKï¼‰ä¸ºä¾‹è¿›è¡ŒéªŒè¯ï¼š

| æŒ‡æ ‡ | AkShare æ•°æ® | å®˜æ–¹æ•°æ® | æ˜¯å¦ä¸€è‡´ |
|------|-------------|---------|---------|
| ä¸Šå¸‚æ—¥æœŸ | 2004-06-16 | 2004-06-16 | âœ… |
| å‘è¡Œä»· | 3.7 HKD | 3.70 HKD | âœ… |
| æ¯æ‰‹è‚¡æ•° | 100 | 100 | âœ… |
| æ²ªæ¸¯é€šæ ‡çš„ | æ˜¯ | æ˜¯ | âœ… |
| æ·±æ¸¯é€šæ ‡çš„ | æ˜¯ | æ˜¯ | âœ… |

### 3.4 å·²çŸ¥é—®é¢˜

1. **å®æ—¶è¡Œæƒ…å»¶è¿Ÿ**ï¼šçº¦ 15 åˆ†é’Ÿï¼Œä¸é€‚åˆé«˜é¢‘äº¤æ˜“åœºæ™¯
2. **éƒ¨åˆ†æ¥å£ä¸ç¨³å®š**ï¼š`stock_hk_spot_em` å¶å°”è¶…æ—¶
3. **è´¢æŠ¥ä¸‰è¡¨ä¸å®Œæ•´**ï¼šç¼ºå°‘å®Œæ•´çš„åˆ©æ¶¦è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨ã€ç°é‡‘æµé‡è¡¨
4. **çˆ¬è™«é™åˆ¶**ï¼šé«˜é¢‘è°ƒç”¨å¯èƒ½è§¦å‘åçˆ¬æœºåˆ¶

---

## 4. ä¸ Tushare å¯¹æ¯”

### 4.1 æ¸¯è‚¡æ•°æ®èƒ½åŠ›å¯¹æ¯”

| èƒ½åŠ›ç»´åº¦ | Tushare Pro | AkShare |
|---------|-------------|---------|
| **API å¯†é’¥** | éœ€è¦ Token + ç§¯åˆ† | ä¸éœ€è¦ |
| **æ¸¯è‚¡è¦†ç›–** | çº¦ 2500 åªï¼ˆhk_basicï¼‰ | 564 åªï¼ˆæ¸¯è‚¡é€šï¼‰ + å…¨éƒ¨æ¸¯è‚¡è¡Œæƒ… |
| **æ—¥çº¿æ•°æ®** | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **åˆ†é’Ÿæ•°æ®** | âŒ æ¸¯è‚¡ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| **è´¢åŠ¡ä¸‰è¡¨** | âš ï¸ ä¸å®Œæ•´ | âš ï¸ ä¸å®Œæ•´ |
| **è´¢åŠ¡æŒ‡æ ‡** | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **å…¬å¸ä¿¡æ¯** | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **å®æ—¶è¡Œæƒ…** | âŒ ä¸æ”¯æŒ | âš ï¸ 15åˆ†é’Ÿå»¶è¿Ÿ |
| **æ•°æ®ç¨³å®šæ€§** | â­â­â­â­â­ | â­â­â­ |
| **è°ƒç”¨é™åˆ¶** | ç§¯åˆ†åˆ¶ | æ— é™åˆ¶ï¼ˆä½†æœ‰åçˆ¬ï¼‰|

### 4.2 æ¨èä½¿ç”¨ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Finspark æ¸¯è‚¡æ•°æ®ç­–ç•¥                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Tushare Pro â”‚          â”‚   AkShare    â”‚           â”‚
â”‚  â”‚  (ä¸»è¦æ¥æº)   â”‚          â”‚  (è¡¥å……æ¥æº)   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                         â”‚                   â”‚
â”‚         â–¼                         â–¼                   â”‚
â”‚  â€¢ Aè‚¡å®Œæ•´æ•°æ®              â€¢ æ¸¯è‚¡æ—¥çº¿/åˆ†é’Ÿæ•°æ®         â”‚
â”‚  â€¢ æ¸¯è‚¡åŸºç¡€åˆ—è¡¨              â€¢ æ¸¯è‚¡è´¢åŠ¡æŒ‡æ ‡             â”‚
â”‚  â€¢ è´¢åŠ¡ä¸‰è¡¨ï¼ˆAè‚¡ï¼‰           â€¢ æ¸¯è‚¡é€šæˆåˆ†è‚¡             â”‚
â”‚  â€¢ é«˜ç¨³å®šæ€§                  â€¢ å…¬å¸è¯¦ç»†ä¿¡æ¯             â”‚
â”‚                             â€¢ åˆ†çº¢æ´¾æ¯è®°å½•             â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æ¥å…¥å®æ–½æ–¹æ¡ˆ

### 5.1 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Finspark Backend                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              DataSourceRouter                    â”‚   â”‚
â”‚  â”‚  (æ ¹æ®è‚¡ç¥¨ä»£ç è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”æ•°æ®æº)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                        â”‚                    â”‚
â”‚           â–¼                        â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  TushareService â”‚     â”‚  AkshareService â”‚          â”‚
â”‚  â”‚  (Aè‚¡ + æ¸¯è‚¡åŸºç¡€)â”‚     â”‚  (æ¸¯è‚¡è¯¦ç»†æ•°æ®)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                        â”‚                    â”‚
â”‚           â–¼                        â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Cloudflare D1 æ•°æ®åº“                 â”‚   â”‚
â”‚  â”‚  â€¢ stocks è¡¨å¢åŠ  market å­—æ®µåŒºåˆ† A/HK            â”‚   â”‚
â”‚  â”‚  â€¢ ç¼“å­˜å±‚å‡å°‘ API è°ƒç”¨                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ–°å¢æœåŠ¡æ–‡ä»¶

éœ€è¦åˆ›å»º `src/services/akshare.ts`ï¼š

```typescript
// src/services/akshare.ts
// AkShare æ¸¯è‚¡æ•°æ®æœåŠ¡

interface HKStockQuote {
  symbol: string;           // 00700
  name: string;             // è…¾è®¯æ§è‚¡
  price: number;            // æœ€æ–°ä»·
  change: number;           // æ¶¨è·Œé¢
  changePercent: number;    // æ¶¨è·Œå¹…
  open: number;             // ä»Šå¼€
  high: number;             // æœ€é«˜
  low: number;              // æœ€ä½
  prevClose: number;        // æ˜¨æ”¶
  volume: number;           // æˆäº¤é‡
  amount: number;           // æˆäº¤é¢
}

interface HKStockHistory {
  date: string;
  open: number;
  close: number;
  high: number;
  low: number;
  volume: number;
  amount: number;
  amplitude: number;        // æŒ¯å¹…
  changePercent: number;    // æ¶¨è·Œå¹…
  change: number;           // æ¶¨è·Œé¢
  turnover: number;         // æ¢æ‰‹ç‡
}

interface HKFinancialIndicator {
  eps: number;              // åŸºæœ¬æ¯è‚¡æ”¶ç›Š
  bvps: number;             // æ¯è‚¡å‡€èµ„äº§
  dps: number;              // æ¯è‚¡è‚¡æ¯TTM
  pe: number;               // å¸‚ç›ˆç‡
  pb: number;               // å¸‚å‡€ç‡
  marketCap: number;        // æ€»å¸‚å€¼
  // ... æ›´å¤šå­—æ®µ
}

export class AkshareService {
  private baseUrl: string;
  
  constructor(proxyUrl?: string) {
    // AkShare éœ€è¦ Python åç«¯ä»£ç†
    this.baseUrl = proxyUrl || 'http://localhost:5000/akshare';
  }
  
  // è·å–æ¸¯è‚¡é€šæˆåˆ†è‚¡åˆ—è¡¨
  async getHKStockList(): Promise<HKStockQuote[]> {
    // è°ƒç”¨ Python ä»£ç†æœåŠ¡
  }
  
  // è·å–æ¸¯è‚¡å†å²æ—¥çº¿
  async getHKHistory(symbol: string, startDate: string, endDate: string): Promise<HKStockHistory[]> {
    // è°ƒç”¨ stock_hk_hist
  }
  
  // è·å–æ¸¯è‚¡è´¢åŠ¡æŒ‡æ ‡
  async getHKFinancials(symbol: string): Promise<HKFinancialIndicator> {
    // è°ƒç”¨ stock_hk_financial_indicator_em
  }
  
  // è·å–å…¬å¸æ¦‚å†µ
  async getHKCompanyProfile(symbol: string): Promise<any> {
    // è°ƒç”¨ stock_hk_company_profile_em
  }
}
```

### 5.3 Python ä»£ç†æœåŠ¡

ç”±äº AkShare æ˜¯ Python åº“ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªä»£ç†æœåŠ¡ï¼š

```python
# scripts/akshare_proxy.py
from flask import Flask, jsonify, request
import akshare as ak

app = Flask(__name__)

@app.route('/akshare/hk/list', methods=['GET'])
def hk_stock_list():
    """æ¸¯è‚¡é€šæˆåˆ†è‚¡åˆ—è¡¨"""
    df = ak.stock_hk_ggt_components_em()
    return jsonify(df.to_dict('records'))

@app.route('/akshare/hk/history/<symbol>', methods=['GET'])
def hk_history(symbol):
    """æ¸¯è‚¡å†å²æ—¥çº¿"""
    start = request.args.get('start', '20240101')
    end = request.args.get('end', '20261231')
    adjust = request.args.get('adjust', 'qfq')
    
    df = ak.stock_hk_hist(
        symbol=symbol,
        period="daily",
        start_date=start,
        end_date=end,
        adjust=adjust
    )
    return jsonify(df.to_dict('records'))

@app.route('/akshare/hk/financial/<symbol>', methods=['GET'])
def hk_financial(symbol):
    """æ¸¯è‚¡è´¢åŠ¡æŒ‡æ ‡"""
    df = ak.stock_hk_financial_indicator_em(symbol=symbol)
    return jsonify(df.to_dict('records'))

@app.route('/akshare/hk/company/<symbol>', methods=['GET'])
def hk_company(symbol):
    """æ¸¯è‚¡å…¬å¸æ¦‚å†µ"""
    df = ak.stock_hk_company_profile_em(symbol=symbol)
    return jsonify(df.to_dict('records'))

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

### 5.4 æ•°æ®åº“æ‰©å±•

éœ€è¦ä¿®æ”¹ stocks è¡¨ä»¥æ”¯æŒæ¸¯è‚¡ï¼š

```sql
-- æ–°å¢è¿ç§»æ–‡ä»¶ï¼šmigrations/0017_hk_stock_support.sql

-- æ·»åŠ å¸‚åœºå­—æ®µ
ALTER TABLE stocks ADD COLUMN market TEXT DEFAULT 'A' CHECK(market IN ('A', 'HK', 'US'));

-- æ·»åŠ æ¸¯è‚¡ç‰¹æœ‰å­—æ®µ
ALTER TABLE stocks ADD COLUMN lot_size INTEGER;           -- æ¯æ‰‹è‚¡æ•°
ALTER TABLE stocks ADD COLUMN hk_stock_connect BOOLEAN;   -- æ˜¯å¦æ¸¯è‚¡é€šæ ‡çš„

-- åˆ›å»ºæ¸¯è‚¡ç´¢å¼•
CREATE INDEX idx_stocks_market ON stocks(market);
CREATE INDEX idx_stocks_hk_connect ON stocks(hk_stock_connect);
```

### 5.5 å®æ–½æ­¥éª¤

```
Phase 1: åŸºç¡€æ¥å…¥ï¼ˆ1-2å¤©ï¼‰
â”œâ”€â”€ å®‰è£… AkShareï¼špip install akshare
â”œâ”€â”€ åˆ›å»º Python ä»£ç†æœåŠ¡
â”œâ”€â”€ æµ‹è¯•æ ¸å¿ƒæ¥å£ç¨³å®šæ€§
â””â”€â”€ åˆ›å»º AkshareService ç±»

Phase 2: æ•°æ®æ•´åˆï¼ˆ2-3å¤©ï¼‰
â”œâ”€â”€ ä¿®æ”¹æ•°æ®åº“ schema
â”œâ”€â”€ åˆ›å»º DataSourceRouter
â”œâ”€â”€ å®ç°æ¸¯è‚¡æ•°æ®åŒæ­¥è„šæœ¬
â””â”€â”€ æ·»åŠ æ¸¯è‚¡åˆ°æœç´¢åŠŸèƒ½

Phase 3: å‰ç«¯é€‚é…ï¼ˆ1-2å¤©ï¼‰
â”œâ”€â”€ ä¿®æ”¹è‚¡ç¥¨æœç´¢ç»„ä»¶
â”œâ”€â”€ é€‚é…æ¸¯è‚¡ä»£ç æ ¼å¼ï¼ˆ00700 vs 00700.HKï¼‰
â”œâ”€â”€ æ·»åŠ æ¸¯è‚¡ä¸“å±å±•ç¤º
â””â”€â”€ æµ‹è¯•å®Œæ•´æµç¨‹

Phase 4: ä¼˜åŒ–ä¸ç›‘æ§ï¼ˆæŒç»­ï¼‰
â”œâ”€â”€ æ·»åŠ æ•°æ®ç¼“å­˜
â”œâ”€â”€ å®ç°é”™è¯¯é‡è¯•æœºåˆ¶
â”œâ”€â”€ ç›‘æ§ API è°ƒç”¨çŠ¶æ€
â””â”€â”€ å®šæœŸéªŒè¯æ•°æ®å‡†ç¡®æ€§
```

---

## 6. é£é™©ä¸æ³¨æ„äº‹é¡¹

### 6.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
| æ¥å£å˜æ›´ | æ•°æ®è·å–å¤±è´¥ | å®šæœŸæ£€æŸ¥ã€ç‰ˆæœ¬é”å®š |
| åçˆ¬å°ç¦ | æœåŠ¡ä¸å¯ç”¨ | é™ä½è°ƒç”¨é¢‘ç‡ã€ä½¿ç”¨ç¼“å­˜ |
| æ•°æ®å»¶è¿Ÿ | ç”¨æˆ·ä½“éªŒå·® | æ˜ç¡®æ ‡æ³¨æ•°æ®æ—¶é—´ |
| Python ä¾èµ– | éƒ¨ç½²å¤æ‚ | å®¹å™¨åŒ–éƒ¨ç½² |

### 6.2 æ³•å¾‹é£é™©

> âš ï¸ **é‡è¦æç¤º**ï¼š
> 
> AkShare çš„æ•°æ®æ¥æºäºå…¬å¼€ç½‘ç«™çš„çˆ¬å–ï¼Œä½¿ç”¨æ—¶éœ€æ³¨æ„ï¼š
> 1. ä»…é™å­¦æœ¯ç ”ç©¶å’Œä¸ªäººå­¦ä¹ ä½¿ç”¨
> 2. ä¸å»ºè®®ç”¨äºå•†ä¸šç”Ÿäº§ç¯å¢ƒçš„æ ¸å¿ƒæ•°æ®æº
> 3. æ•°æ®å‡†ç¡®æ€§æ— å®˜æ–¹ä¿è¯
> 4. éµå®ˆå„æ•°æ®æºç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾

### 6.3 å»ºè®®æ–¹æ¡ˆ

**ç”Ÿäº§ç¯å¢ƒæ¨è**ï¼š
1. **ä¸»è¦æ•°æ®æº**ï¼šTushare Proï¼ˆä»˜è´¹ç‰ˆï¼Œæœ‰ SLA ä¿éšœï¼‰
2. **è¡¥å……æ•°æ®æº**ï¼šAkShareï¼ˆå…è´¹ï¼Œç”¨äº Tushare ä¸æ”¯æŒçš„æ¸¯è‚¡æ•°æ®ï¼‰
3. **å¤‡ç”¨æ–¹æ¡ˆ**ï¼šå®˜æ–¹äº¤æ˜“æ‰€æ•°æ®æ¥å£ï¼ˆå¦‚éœ€é«˜å¯é æ€§ï¼‰

---

## 7. æµ‹è¯•ä»£ç 

### 7.1 å¿«é€ŸéªŒè¯è„šæœ¬

```python
#!/usr/bin/env python3
# scripts/test_akshare_hk.py
"""AkShare æ¸¯è‚¡æ¥å£éªŒè¯è„šæœ¬"""

import akshare as ak
import pandas as pd

def test_hk_apis():
    print("=" * 60)
    print("AkShare æ¸¯è‚¡æ¥å£æµ‹è¯•")
    print("=" * 60)
    
    tests = [
        ("æ¸¯è‚¡é€šæˆåˆ†è‚¡", lambda: ak.stock_hk_ggt_components_em()),
        ("è…¾è®¯æ—¥çº¿æ•°æ®", lambda: ak.stock_hk_hist(symbol="00700", period="daily", start_date="20250101", end_date="20260116")),
        ("è…¾è®¯è´¢åŠ¡æŒ‡æ ‡", lambda: ak.stock_hk_financial_indicator_em(symbol="00700")),
        ("è…¾è®¯å…¬å¸æ¦‚å†µ", lambda: ak.stock_hk_company_profile_em(symbol="00700")),
        ("è…¾è®¯åˆ†çº¢è®°å½•", lambda: ak.stock_hk_dividend_payout_em(symbol="00700")),
    ]
    
    results = []
    for name, func in tests:
        try:
            df = func()
            results.append((name, "âœ… æˆåŠŸ", len(df), list(df.columns)[:5]))
            print(f"âœ… {name}: {len(df)} æ¡è®°å½•")
        except Exception as e:
            results.append((name, "âŒ å¤±è´¥", 0, str(e)[:50]))
            print(f"âŒ {name}: {e}")
    
    print("\n" + "=" * 60)
    print("æµ‹è¯•ç»“æœæ±‡æ€»")
    print("=" * 60)
    for name, status, count, info in results:
        print(f"{status} {name}: {count} æ¡ | {info}")

if __name__ == "__main__":
    test_hk_apis()
```

### 7.2 è¿è¡Œæµ‹è¯•

```bash
cd /home/user/webapp/finspark-download
python3 scripts/test_akshare_hk.py
```

---

## 8. ç»“è®ºä¸å»ºè®®

### 8.1 æ€»ä½“è¯„ä»·

**AkShare æ¸¯è‚¡æ•°æ®èƒ½åŠ›è¯„åˆ†ï¼šâ­â­â­â­ (4/5)**

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| æ•°æ®è¦†ç›– | â­â­â­â­â­ | æ¥å£ä¸°å¯Œï¼Œè¦†ç›–å…¨é¢ |
| æ•°æ®è´¨é‡ | â­â­â­â­ | åŸºæœ¬å‡†ç¡®ï¼Œä½†éœ€éªŒè¯ |
| æ›´æ–°åŠæ—¶æ€§ | â­â­â­ | æœ‰å»¶è¿Ÿï¼Œæ—¥ç»ˆæ›´æ–° |
| ç¨³å®šæ€§ | â­â­â­ | å¯èƒ½å› ä¸Šæ¸¸å˜åŒ–å¤±æ•ˆ |
| æ˜“ç”¨æ€§ | â­â­â­â­â­ | æ— éœ€ API Keyï¼Œç®€å•æ˜“ç”¨ |

### 8.2 æœ€ç»ˆå»ºè®®

1. **âœ… æ¨èæ¥å…¥ AkShare** ä½œä¸º Finspark çš„æ¸¯è‚¡æ•°æ®è¡¥å……æº
2. **âš ï¸ ä¿ç•™ Tushare** ä½œä¸ºä¸»è¦æ•°æ®æºï¼Œä¿è¯ç¨³å®šæ€§
3. **ğŸ“Š å®ç°æ•°æ®ç¼“å­˜** å‡å°‘ API è°ƒç”¨ï¼Œæé«˜å“åº”é€Ÿåº¦
4. **ğŸ”„ å»ºç«‹æ•°æ®æ ¡éªŒ** å®šæœŸæ¯”å¯¹å¤šæ•°æ®æºï¼Œç¡®ä¿å‡†ç¡®æ€§
5. **ğŸ“ˆ åˆ†é˜¶æ®µå®æ–½** å…ˆæ¥å…¥æ ¸å¿ƒæ¥å£ï¼Œé€æ­¥æ‰©å±•åŠŸèƒ½

---

## é™„å½•

### A. ç›¸å…³èµ„æº

- AkShare å®˜æ–¹æ–‡æ¡£ï¼šhttps://akshare.akfamily.xyz/
- AkShare GitHubï¼šhttps://github.com/akfamily/akshare
- AkShare æ•°æ®å­—å…¸ï¼šhttps://akshare.akfamily.xyz/data/stock/stock.html
- Tushare Proï¼šhttps://tushare.pro/

### B. æ¸¯è‚¡ä»£ç å¯¹ç…§è¡¨

| AkShare æ ¼å¼ | æ¸¯äº¤æ‰€æ ¼å¼ | ç¤ºä¾‹ |
|-------------|-----------|------|
| `00700` | `00700.HK` | è…¾è®¯æ§è‚¡ |
| `09988` | `09988.HK` | é˜¿é‡Œå·´å·´ |
| `03690` | `03690.HK` | ç¾å›¢ |
| `09618` | `09618.HK` | äº¬ä¸œ |

### C. æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|---------|
| 2026-01-16 | åˆç‰ˆè°ƒç ”æŠ¥å‘Š |

---

*æœ¬æŠ¥å‘Šç”± Finspark AI å¼€å‘å›¢é˜Ÿç”Ÿæˆ*
