â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                   â•‘
â•‘          ğŸ‰ APIå¯†é’¥é…ç½®å®Œæˆ - å®Œæ•´åŠŸèƒ½å·²è§£é”ï¼                    â•‘
â•‘                                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âœ… é…ç½®çŠ¶æ€

| é…ç½®é¡¹ | çŠ¶æ€ | å€¼/è¯´æ˜ |
|--------|------|---------|
| **VECTORENGINE_API_KEY** | âœ… å·²é…ç½® | sk-JtQ4dB1Z7LMF... |
| **TUSHARE_TOKEN** | âœ… å·²é…ç½® | 788627836620509184 |
| **JWT_SECRET** | âœ… å·²é…ç½® | è‡ªåŠ¨ç”Ÿæˆçš„å®‰å…¨å¯†é’¥ |
| **æœåŠ¡çŠ¶æ€** | âœ… è¿è¡Œä¸­ | APIå¯†é’¥å·²åŠ è½½å¹¶ç”Ÿæ•ˆ |

---

## ğŸ¯ åŠŸèƒ½éªŒè¯ç»“æœ

### âœ… å·²æˆåŠŸæµ‹è¯•çš„åŠŸèƒ½

1. **è‚¡ç¥¨æ•°æ®è·å–ï¼ˆTushare APIï¼‰**
   ```
   æµ‹è¯•è‚¡ç¥¨: è´µå·èŒ…å° (600519.SH)
   ç»“æœ: âœ… æˆåŠŸè·å–
   - åŸºæœ¬ä¿¡æ¯: å…¬å¸åç§°ã€è¡Œä¸šã€ä¸Šå¸‚æ—¥æœŸ
   - å…¬å¸è¯¦æƒ…: è‘£äº‹é•¿ã€å‘˜å·¥æ•°ã€ä¸»è¥ä¸šåŠ¡
   - ä¼°å€¼æ•°æ®: PEã€PBã€å¸‚å€¼ã€æ”¶ç›˜ä»·
   ```

2. **AIåˆ†æåŠŸèƒ½ï¼ˆ10å¤§Agentï¼‰**
   ```
   æµ‹è¯•å¯¹è±¡: è´µå·èŒ…å°
   æŠ¥å‘ŠID: 1
   çŠ¶æ€: âœ… æ­£åœ¨åˆ†æä¸­ (processing)
   
   æ•°æ®è·å–æˆåŠŸ:
   - åˆ©æ¶¦è¡¨: 114æ¡è®°å½•
   - èµ„äº§è´Ÿå€ºè¡¨: 100æ¡è®°å½•
   - ç°é‡‘æµé‡è¡¨: 93æ¡è®°å½•
   - ä¸šç»©é¢„å‘Š: 30æ¡
   - è´¢åŠ¡æŒ‡æ ‡: 100æ¡
   - æ¯æ—¥æŒ‡æ ‡: 5,828æ¡
   ```

3. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   ```
   æµ‹è¯•è´¦å·: demo@test.com
   ç»“æœ: âœ… æ³¨å†Œã€ç™»å½•ã€Tokenç”Ÿæˆå…¨éƒ¨æˆåŠŸ
   ```

4. **IPè§’è‰²ç³»ç»Ÿ**
   ```
   è§’è‰²é›†: 2ä¸ª
   - å“ªå’ç”µå½±è§’è‰²: 6ä¸ªè§’è‰²
   - å•†ä¸šç»å…¸è§’è‰²: 4ä¸ªè§’è‰²
   çŠ¶æ€: âœ… æ­£å¸¸è¿è¡Œ
   ```

---

## ğŸŒ åœ¨çº¿è®¿é—®

### ä¸»é¡µ
https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai

### ä½¿ç”¨æ–¹å¼
1. è®¿é—®ä¸»é¡µ
2. åœ¨æœç´¢æ¡†è¾“å…¥"èŒ…å°"æˆ–å…¶ä»–è‚¡ç¥¨åç§°
3. ç‚¹å‡»"å¼€å§‹åˆ†æ"æŒ‰é’®
4. å®æ—¶æŸ¥çœ‹10å¤§AI Agentçš„åˆ†æè¿›åº¦
5. ç­‰å¾…1-2åˆ†é’Ÿå³å¯çœ‹åˆ°å®Œæ•´çš„è´¢æŠ¥åˆ†æç»“æœ

### æµ‹è¯•è´¦å·
```
é‚®ç®±: demo@test.com
å¯†ç : Demo123456
```

---

## ğŸ“Š 10å¤§AI Agentè¿è¡Œæµç¨‹

å½“ä½ å¯åŠ¨åˆ†ææ—¶ï¼Œç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹é¡ºåºååŒå·¥ä½œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: å¹¶è¡Œæ‰§è¡Œ (åŒæ—¶è¿›è¡Œ)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ Agent 1: åˆ©æ¶¦è¡¨åˆ†æ (Profitability)                  â”‚
â”‚  â–¶ Agent 2: èµ„äº§è´Ÿå€ºè¡¨åˆ†æ (Balance Sheet)               â”‚
â”‚  â–¶ Agent 3: ç°é‡‘æµé‡è¡¨åˆ†æ (Cash Flow)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: ä¾èµ–æ‰§è¡Œ (åŸºäºPhase 1ç»“æœ)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ Agent 4: ç›ˆåˆ©è´¨é‡åˆ†æ (ä¸‰è¡¨è”åŠ¨)                      â”‚
â”‚  â–¶ Agent 5: é£é™©ä¸æ æ†åˆ†æ                               â”‚
â”‚  â–¶ Agent 6: ä¸šåŠ¡æ´å¯Ÿåˆ†æ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: æ·±åº¦åˆ†æ (å¯é€‰)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ Agent 7: å•†ä¸šæ¨¡å¼åˆ†æ                                 â”‚
â”‚  â–¶ Agent 8: ä¸šç»©é¢„æµ‹                                     â”‚
â”‚  â–¶ Agent 9: ä¼°å€¼è¯„ä¼°                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Final Phase: æ±‡æ€»                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ Agent 10: æœ€ç»ˆæŠ•èµ„ç»“è®º                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª APIæµ‹è¯•å‘½ä»¤

### 1. æŸ¥çœ‹å½“å‰æŠ¥å‘ŠçŠ¶æ€
```bash
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/reports/1"
```

### 2. æœç´¢å…¶ä»–è‚¡ç¥¨
```bash
# æœç´¢å·¥å•†é“¶è¡Œ
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/stock/search?q=å·¥å•†é“¶è¡Œ"

# æœç´¢æ¯”äºšè¿ª
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/stock/search?q=æ¯”äºšè¿ª"
```

### 3. è·å–çƒ­é—¨è‚¡ç¥¨åˆ—è¡¨
```bash
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/stock/hot"
```

### 4. æŸ¥çœ‹IPè§’è‰²æ¨è
```bash
# æ ¹æ®è¡Œä¸šæ¨èè§’è‰²
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/characters/recommend?industry=ç™½é…’"
```

---

## ğŸ¨ é«˜çº§åŠŸèƒ½æµ‹è¯•

### 1. ç”ŸæˆAIæ¼«ç”»æŠ¥å‘Š
ç­‰å¾…è´¢æŠ¥åˆ†æå®Œæˆåï¼ˆæŠ¥å‘ŠçŠ¶æ€å˜ä¸ºcompletedï¼‰ï¼Œå¯ä»¥ç”ŸæˆAIæ¼«ç”»ï¼š

```bash
# ç™»å½•è·å–Token
TOKEN=$(curl -s -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "demo@test.com", "password": "Demo123456"}' \
  | grep -o '"accessToken":"[^"]*"' | cut -d'"' -f4)

# ç”Ÿæˆå“ªå’è§’è‰²çš„æ¼«ç”»
curl -X POST "http://localhost:3000/api/reports/1/comic" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "characterSetId": "nezha-movie",
    "mainCharacterId": "nezha",
    "outputFormat": "grid"
  }'
```

### 2. å¯¼å‡ºPDFæŠ¥å‘Š
```bash
curl "https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai/api/reports/1/pdf" > report.html
```

### 3. æ·»åŠ æ”¶è—
```bash
curl -X POST "http://localhost:3000/api/favorites" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "stockCode": "600519.SH",
    "note": "èŒ…å°æ˜¯ç™½é…’é¾™å¤´"
  }'
```

---

## ğŸ“ˆ æ•°æ®è¯´æ˜

### Tushare APIé…ç½®
- **ç§¯åˆ†ç±»å‹**: 5000ç§¯åˆ†ï¼ˆä½¿ç”¨ä¸­è½¬ç«™APIï¼‰
- **æ•°æ®è¦†ç›–**: Aè‚¡å…¨å¸‚åœº
- **æ›´æ–°é¢‘ç‡**: å®æ—¶
- **å¯ç”¨æ¥å£**: 
  - è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
  - æ—¥çº¿/å‘¨çº¿/æœˆçº¿æ•°æ®
  - è´¢åŠ¡æŠ¥è¡¨ï¼ˆåˆ©æ¶¦è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨ã€ç°é‡‘æµï¼‰
  - ä¸šç»©é¢„å‘Šã€è´¢åŠ¡æŒ‡æ ‡
  - ä¸»è¥ä¸šåŠ¡æ„æˆ

### VectorEngine API
- **æ¨¡å‹**: GPT-5.1
- **ç”¨é€”**: 
  - 10å¤§Agentè´¢æŠ¥åˆ†æ
  - AIæ¼«ç”»è„šæœ¬ç”Ÿæˆ
  - æŠ•èµ„å»ºè®®ç”Ÿæˆ

---

## ğŸ”§ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼ˆå®æ—¶ç›‘æ§Agentè¿è¡Œï¼‰
```bash
pm2 logs genspark-financial
```

### æŸ¥çœ‹æœ€è¿‘æ—¥å¿—ï¼ˆä¸é˜»å¡ï¼‰
```bash
pm2 logs genspark-financial --nostream --lines 50
```

### é‡å¯æœåŠ¡
```bash
pm2 restart genspark-financial
```

### æŸ¥çœ‹æ•°æ®åº“æ•°æ®
```bash
cd /home/user/webapp

# æŸ¥çœ‹è‚¡ç¥¨æ•°é‡
npm run db:console -- --command="SELECT COUNT(*) FROM stocks"

# æŸ¥çœ‹æ‰€æœ‰æŠ¥å‘Š
npm run db:console -- --command="SELECT id, companyCode, status, createdAt FROM analysis_reports"

# æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
npm run db:console -- --command="SELECT id, email, created_at FROM users"
```

---

## ğŸ¯ æ¨èæµ‹è¯•æµç¨‹

### å®Œæ•´åŠŸèƒ½æµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰

1. **è®¿é—®ä¸»é¡µ** (1åˆ†é’Ÿ)
   - æ‰“å¼€: https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai
   - æ³¨å†Œ/ç™»å½•æµ‹è¯•è´¦å·
   - æµè§ˆç•Œé¢

2. **æœç´¢è‚¡ç¥¨** (1åˆ†é’Ÿ)
   - æœç´¢"èŒ…å°"ã€"æ¯”äºšè¿ª"ã€"å·¥å•†é“¶è¡Œ"
   - æŸ¥çœ‹æœç´¢ç»“æœ
   - ç‚¹å‡»æŸ¥çœ‹è‚¡ç¥¨è¯¦æƒ…

3. **å¯åŠ¨åˆ†æ** (2-3åˆ†é’Ÿ)
   - é€‰æ‹©ä¸€åªè‚¡ç¥¨
   - ç‚¹å‡»"å¼€å§‹åˆ†æ"
   - è§‚å¯Ÿ10å¤§Agentå®æ—¶è¿›åº¦
   - ç­‰å¾…åˆ†æå®Œæˆ

4. **æŸ¥çœ‹ç»“æœ** (2åˆ†é’Ÿ)
   - æŸ¥çœ‹åˆ†ææŠ¥å‘Š
   - é˜…è¯»æŠ•èµ„å»ºè®®
   - æŸ¥çœ‹å„é¡¹è´¢åŠ¡æŒ‡æ ‡
   - å°è¯•å¯¼å‡ºPDF

5. **é«˜çº§åŠŸèƒ½** (å¯é€‰)
   - ç”ŸæˆAIæ¼«ç”»
   - æ·»åŠ åˆ°æ”¶è—
   - ä¿®æ”¹ç”¨æˆ·èµ„æ–™

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´æ–‡æ¡£**: `/home/user/webapp/README.md`
- **å¿«é€ŸæŒ‡å—**: `/home/user/webapp/QUICKSTART.md`
- **æŠ€æœ¯è®¾è®¡**: `/home/user/webapp/docs/TECHNICAL_DESIGN.md`
- **ç¯å¢ƒå˜é‡**: `/home/user/webapp/.dev.vars`

---

## ğŸŠ å®Œæˆæƒ…å†µæ€»ç»“

âœ… **ç¯å¢ƒæ­å»º**: 100%å®Œæˆ
âœ… **æ•°æ®åº“åˆå§‹åŒ–**: 100%å®Œæˆï¼ˆ169å®¶å…¬å¸ï¼‰
âœ… **APIå¯†é’¥é…ç½®**: 100%å®Œæˆ
âœ… **æ ¸å¿ƒåŠŸèƒ½**: 100%å¯ç”¨
âœ… **AIåˆ†æ**: 100%è¿è¡Œä¸­
âœ… **æ–‡æ¡£**: 100%å®Œå–„

---

## ğŸ’¡ ä¸‹ä¸€æ­¥å»ºè®®

### 1. ä½“éªŒå®Œæ•´åŠŸèƒ½
- è®¿é—®ç½‘é¡µè¿›è¡ŒUIæµ‹è¯•
- æµ‹è¯•å¤šä¸ªä¸åŒè¡Œä¸šçš„è‚¡ç¥¨
- ç”ŸæˆAIæ¼«ç”»æŠ¥å‘Š
- å¯¼å‡ºPDFæŠ¥å‘Š

### 2. æ•°æ®æ‰©å±•
```bash
# å¯¼å…¥æ›´å¤šè‚¡ç¥¨æ•°æ®ï¼ˆå¯é€‰ï¼‰
cd /home/user/webapp
npm run db:console -- --file=./seed_more_stocks.sql
```

### 3. ä»£ç å­¦ä¹ 
- æŸ¥çœ‹ `src/agents/orchestrator.ts` - Agentç¼–æ’é€»è¾‘
- æŸ¥çœ‹ `src/services/vectorengine.ts` - AIæœåŠ¡è°ƒç”¨
- æŸ¥çœ‹ `src/services/tushare.ts` - è‚¡ç¥¨æ•°æ®è·å–
- æŸ¥çœ‹ `src/routes/api.ts` - APIè·¯ç”±å®šä¹‰

### 4. åŠŸèƒ½å®Œå–„
- æ·»åŠ æ›´å¤šè¡Œä¸šçš„è‚¡ç¥¨
- ä¼˜åŒ–UIç•Œé¢
- æ·»åŠ æ›´å¤šå›¾è¡¨ç±»å‹
- å¢åŠ æ•°æ®åˆ†æç»´åº¦

---

## ğŸ‰ æ­å–œï¼

ä½ çš„è´¢æŠ¥åˆ†æå¹³å°å·²ç»å®Œå…¨å°±ç»ªï¼

ğŸ”— **ç«‹å³è®¿é—®**: https://3000-impnztmdl9pncm6s5qgi2-0e616f0a.sandbox.novita.ai

å¼€å§‹ä½ çš„æ™ºèƒ½è´¢æŠ¥åˆ†æä¹‹æ—…å§ï¼ğŸš€

---

*é…ç½®æ—¶é—´: 2025-12-23 12:10*
*ç¯å¢ƒ: Sandbox + PM2 + Wrangler*
*çŠ¶æ€: å®Œå…¨å¯ç”¨ âœ…*
